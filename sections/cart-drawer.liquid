{% comment %}
  IMPACT THEME - CLEAN CART DRAWER TEMPLATE
  This restores the default layout with item listing, subtotal, and checkout button.
{% endcomment %}

<div id="CartDrawer" class="cart-drawer">
  <div class="cart-drawer__overlay" data-cart-overlay></div>
  <div class="cart-drawer__content" data-cart-drawer>
    <header class="cart-drawer__header">
      <h2>Your Cart</h2>
      <button type="button" class="cart-drawer__close" data-cart-close>&times;</button>
    </header>

    <form action="{{ routes.cart_url }}" method="post" novalidate class="cart-drawer__form">
      <div class="cart-drawer__items" data-cart-items>
        {% if cart.items.size == 0 %}
          <p>Your cart is empty.</p>
        {% else %}
          {% for item in cart.items %}
            <div class="cart-drawer__item">
              <div class="cart-drawer__item-image">
                <img src="{{ item.image | img_url: '150x' }}" alt="{{ item.title }}">
              </div>
              <div class="cart-drawer__item-info">
                <p class="cart-drawer__item-title">{{ item.title }}</p>
                <p class="cart-drawer__item-price">{{ item.final_line_price | money }}</p>
                <div class="cart-drawer__item-quantity">
                  <input type="number" name="updates[]" value="{{ item.quantity }}" min="1">
                </div>
              </div>
            </div>
          {% endfor %}
        {% endif %}
      </div>

      <div class="cart-drawer__footer">
        <div class="cart-drawer__subtotal">
          <p>Subtotal:</p>
          <strong>{{ cart.total_price | money }}</strong>
        </div>

        <div class="cart-drawer__actions">
          <a href="{{ routes.cart_url }}" class="button-secondary">View Cart</a>
          <button type="submit" formaction="/checkout" class="button-primary">
            Checkout
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
