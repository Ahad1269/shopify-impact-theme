{% if template.name == 'cart' %}
<!-- JazzCash + Bank Transfer (Cart Page Only) -->
<style>
  .payment-method-box {
    margin-top: 1.5rem;
    padding: 1rem;
    background: #f9fafb;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
  }
  .payment-method-box h3 {
    font-size: 16px;
    font-weight: 700;
    margin-bottom: 0.75rem;
    color: #111827;
  }
  .payment-method-select {
    width: 100%;
    padding: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 15px;
    outline: none;
    transition: 0.2s ease;
  }
  .payment-method-select:hover {
    border-color: #111;
  }
  .payment-details {
    margin-top: 1rem;
    background: #fff;
    padding: 1rem;
    border-radius: 10px;
    border: 1px solid #e5e7eb;
    display: none;
  }
  .payment-details.active {
    display: block;
  }
  .payment-form {
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .payment-form input, .payment-form textarea {
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    width: 100%;
    font-size: 14px;
  }
  .payment-form input:focus, .payment-form textarea:focus {
    border-color: #000;
    outline: none;
  }
  .payment-form button {
    background: #111827;
    color: #fff;
    border: none;
    padding: 12px;
    border-radius: 10px;
    font-size: 15px;
    font-weight: 600;
    cursor: pointer;
    transition: 0.2s ease;
  }
  .payment-form button:hover {
    background: #000;
  }
</style>

<div class="payment-method-box">
  <h3>Choose Payment Method:</h3>
  <select id="paymentMethodCart" class="payment-method-select">
    <option value="">Select Payment Method</option>
    <option value="cod">💵 Cash on Delivery</option>
    <option value="jazzcash">📱 JazzCash (5% OFF)</option>
    <option value="bank">🏦 Bank Transfer (Meezan Bank - 5% OFF)</option>
  </select>

  <!-- JazzCash -->
  <div id="jazzcashDetails" class="payment-details">
    <p><strong>Account Number:</strong> 0321-7815858</p>
    <p>Please send payment via JazzCash and then share your receipt via WhatsApp:</p>
    <p><strong>📞 WhatsApp:</strong> 0321-7815858</p>
    <form class="payment-form">
      <input type="text" placeholder="Full Name" required>
      <input type="email" placeholder="Email Address" required>
      <input type="tel" placeholder="Phone Number" required>
      <textarea placeholder="Receipt Details or Reference ID" required></textarea>
      <button type="button" id="applyJazzCash">Apply JazzCash Discount</button>
    </form>
  </div>

  <!-- Meezan Bank -->
  <div id="bankDetails" class="payment-details">
    <p><strong>Bank Name:</strong> Meezan Bank</p>
    <p><strong>Account Title:</strong> Rabisa Store</p>
    <p><strong>Account Number:</strong> PK47 MEZN 0004 0301 0456 4834</p>
    <p><strong>Branch Code:</strong> 0403 — Peoples Colony Branch, Faisalabad</p>
    <p>After sending payment, share receipt via:</p>
    <p><strong>📧 Email:</strong> rabisastore@gmail.com<br><strong>📞 WhatsApp:</strong> +92 321 7815858</p>
    <form class="payment-form">
      <input type="text" placeholder="Full Name" required>
      <input type="email" placeholder="Email Address" required>
      <input type="tel" placeholder="Phone Number" required>
      <textarea placeholder="Receipt Details or Reference ID" required></textarea>
      <button type="button" id="applyBank">Apply Bank Discount</button>
    </form>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const select = document.getElementById("paymentMethodCart");
    const jazzcashDetails = document.getElementById("jazzcashDetails");
    const bankDetails = document.getElementById("bankDetails");
    const applyJazzCash = document.getElementById("applyJazzCash");
    const applyBank = document.getElementById("applyBank");

    if (!select) return;

    select.addEventListener("change", () => {
      jazzcashDetails.classList.remove("active");
      bankDetails.classList.remove("active");

      if (select.value === "jazzcash") jazzcashDetails.classList.add("active");
      else if (select.value === "bank") bankDetails.classList.add("active");
    });

    applyJazzCash.addEventListener("click", () => {
      window.location.href = "/discount/JAZZ20?redirect=/cart";
    });

    applyBank.addEventListener("click", () => {
      window.location.href = "/discount/EASYP20?redirect=/cart";
    });
  });
</script>
{% endif %}
